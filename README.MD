# TikTok Live Contexto Game ğŸ®

An interactive word guessing game powered by TikTok LIVE comments! Based on the popular Contexto game, viewers can guess words through live chat, and the app shows how close they are to the secret word.

## Features âœ¨

- ğŸ¯ **Interactive Word Guessing**: Viewers comment words, app shows distance from target
- ğŸ¨ **Color-Coded Feedback**: Green (close), Orange (medium), Red (far)
- ğŸ† **Winner Celebration**: Animated leaderboard for top 3 guesses
- ğŸ **Gift-Powered Hints**: Send gifts to reveal words closer to the target
- ğŸ“Š **Live Leaderboard**: Automatically sorted by distance
- ğŸ‘¥ **Social Tracking**: Follow & Share events in sidebar
- ğŸ”„ **Auto-Reset**: New game starts after winner is found
- ğŸ’¾ **Manual Reset**: Game master can reset anytime

## How It Works ğŸ²

### Game Flow

1. **Game Starts**: Random game number (1-1184) is selected
2. **Players Guess**: Viewers comment words in TikTok LIVE
3. **API Check**: Each word is checked via Contexto API
4. **Distance Shown**: Lower distance = closer to target word
5. **Winner Found**: Distance 0 = WINNER! ğŸ‰
6. **Leaderboard**: Top 3 guesses displayed for 10 seconds
7. **New Game**: Automatically starts a new round

### Distance Color Guide

- ğŸŸ¢ **Green** (â‰¤ 499): Very close!
- ğŸŸ  **Orange** (500-1500): Getting warmer
- ğŸ”´ **Red** (> 1500): Far away

### Gift Hints ğŸ

When someone sends a gift:
- Takes the lowest distance guess
- Divides by 2 (minimum 1)
- Reveals a word at that distance as a hint

## Prerequisites ğŸ“‹

- Docker
- Docker Compose

## Project Structure ğŸ“

```
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ app.py
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html
â””â”€â”€ static/
    â””â”€â”€ style.css
```

## Setup & Running ğŸš€

### 1. Create the project structure

```bash
# Create directories
mkdir -p tiktok-live-contexto/templates tiktok-live-contexto/static
cd tiktok-live-contexto

# Create all the files:
# - Dockerfile
# - docker-compose.yml
# - requirements.txt
# - app.py
# - templates/index.html
# - static/style.css
```

### 2. Build and run with Docker Compose

```bash
# Build the Docker image
docker-compose build

# Start the container
docker-compose up
```

### 3. Access the application

Open your browser and navigate to:
```
http://localhost:8080
```

## Usage ğŸ’¡

### For Game Master

1. Enter TikTok username (e.g., `@isaackogz`)
2. Click **Connect**
3. Game automatically starts with random number
4. Monitor guesses and leaderboard
5. Click **Reset Game** to start fresh round
6. Watch for winner celebration!

### For Viewers

1. Comment single words in TikTok LIVE chat
2. See your guess appear with distance
3. Try to get distance to 0
4. Send gifts to help everyone with hints!

## Game Rules ğŸ“œ

### Valid Guesses

- âœ… Only letters (A-Z) allowed
- âœ… First sentence of comment is used
- âœ… Each word can only be guessed once
- âœ… Minimum 2 characters
- âŒ Numbers, symbols, emoji removed

### Hint System

- ğŸ Any gift triggers hint
- ğŸ’¡ Hint word is at half the lowest distance
- ğŸ¯ Helps narrow down the search area

## Technical Details ğŸ”¬

### API Integration

**Contexto Game API**:
- Game endpoint: `https://api.contexto.me/machado/en/game/{game_no}/{word}`
- Tip endpoint: `https://api.contexto.me/machado/en/tip/{game_no}/{distance}`
- 2-second timeout per request
- Validates response format

### Profile Pictures

- Fetched using TikTokLive's `web.fetch_image_data()`
- Converted to base64 data URLs
- Cached per user
- Fallback to initials if fetch fails

### Performance

**Optimized for**:
- âš¡ Async API calls (non-blocking)
- ğŸ§  In-memory game state
- ğŸ¨ Smooth CSS animations
- ğŸ“¦ Minimal data transfer

**Resource Usage**:
- Memory: ~50-100MB
- CPU: Low (event-driven)
- Network: ~2KB per guess

## UI Layout ğŸ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controls   â”‚    Game Board      â”‚  Info & Hintsâ”‚
â”‚   & Social   â”‚                    â”‚              â”‚
â”‚              â”‚  GAME: #1234       â”‚  How to Play â”‚
â”‚  Connect     â”‚  GUESSES: 15       â”‚              â”‚
â”‚  Disconnect  â”‚                    â”‚  ğŸŸ¢ Close    â”‚
â”‚  Reset Game  â”‚  [type a word]     â”‚  ğŸŸ  Medium   â”‚
â”‚              â”‚                    â”‚  ğŸ”´ Far      â”‚
â”‚  Follow/     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚
â”‚  Share       â”‚  â”‚ User1  word  â”‚  â”‚  ğŸ’¡ Hints    â”‚
â”‚  Events      â”‚  â”‚ ğŸŸ¢        125â”‚  â”‚              â”‚
â”‚              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  word1 (50)  â”‚
â”‚  Error Log   â”‚  â”‚ User2  test  â”‚  â”‚  word2 (125) â”‚
â”‚              â”‚  â”‚ ğŸŸ        1024â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Winner Modal ğŸ†

When distance reaches 0:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ‰ WINNER! ğŸ‰        â”‚
â”‚                             â”‚
â”‚       [Profile Picture]      â”‚
â”‚       Username Here          â”‚
â”‚       "target_word"          â”‚
â”‚                             â”‚
â”‚      ğŸ† Top 3 Guesses       â”‚
â”‚                             â”‚
â”‚  #1  [pfp]  User1  word  0  â”‚
â”‚  #2  [pfp]  User2  test  125â”‚
â”‚  #3  [pfp]  User3  code  340â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Auto-closes after 10 seconds or click **[X]**

## Development ğŸ› ï¸

### Run without Docker

```bash
# Install dependencies
pip install -r requirements.txt

# Run the application
python app.py
```

### Modify Styling

Edit `static/style.css` to customize:
- Color schemes
- Animations
- Layout spacing
- Font sizes

## Troubleshooting ğŸ”§

### Container won't start

```bash
# Check logs
docker-compose logs -f

# Rebuild from scratch
docker-compose down
docker-compose build --no-cache
docker-compose up
```

### API Issues

- Contexto API is external and may have rate limits
- Check console for API error messages
- Invalid words return no response (ignored)

### Profile Pictures Not Showing

- Requires active TikTok connection
- Some users may have privacy settings
- Fallback initials always work

### Game Reset Not Working

- Ensure WebSocket is connected
- Check browser console for errors
- Refresh page if needed

## Advanced Features ğŸ¯

### Game Number Selection

Currently random (1-1184). To use specific game:

```python
# In app.py, modify init_new_game():
game_state['game_number'] = 42  # Your game number
```

### Custom Hint Logic

```python
# In on_gift(), modify:
hint_distance = max(1, lowest_distance // 3)  # Divide by 3 instead
```

### Persistent Leaderboard

Add storage to track all-time best guesses across games.

## License ğŸ“„

This project uses:
- TikTokLive (MIT License)
- Contexto API (Public)

## Credits ğŸ™

- [TikTokLive](https://github.com/isaackogan/TikTokLive) by Isaac Kogan
- [Contexto](https://contexto.me/) for the word game concept
- Built with â¤ï¸ using Python and modern web technologies

## Disclaimer âš ï¸

This is an unofficial project and is not affiliated with TikTok or Contexto. Use responsibly and respect their terms of service.

---

**Have fun guessing! May the closest word win! ğŸ‰**